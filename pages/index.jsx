import Head from "next/head";

// import connectDB from "../lib/dbConnect";
//import Muestra from "./models/Muestra";
// import MorfologiaMandibula from "./models/MorfologiaMandibula";

export default function Home({ morfologiasMandibulas }) {
  // console.log(muestras);
  return (
    <div>
      <Head>
        <title>DB</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className="container">
        <h1>LAOF DataBase APP</h1>
        <h2>Muestras</h2>
       

        <h2>Morfolog√≠as</h2>
        {morfologiasMandibulas.map(
          ({
            _id,
            marcaTemporal,
            evaluador,
            nombre,
            numeroMandibula,
            idCodigoMandibula,
            impresionTotalIzquierda,
            mentonIzquierda,
            anguloMandibularIzquierda,
            anguloMandibularDerecha,
            eversionGonialIzquierda,
            eversionGonialDerecha,
            margenInferiorIzquierda,
            cuerpoMandibularIzquierda,
            ramaMandibularIzquierda,
            ramaMandibularDerecha,
            incisuraMandibularEscotaduraSigmoideaIzquierda,
            incisuraMandibularEscotaduraSigmoideaDerecha,
            procesoCondilarIzquierda,
            procesoCondilarDerecha,
            procesoCoronoideIzquierda,
            procesoCoronoideDerecha,
            archoDentalIzquierda,
            dientesNumero,
            comentarios,
            dienteIzquierda,
          }) => (
            <div className="card mb-2" key={_id}>
              <div className="card-body">
                <div className="h4">ID: {numeroMandibula} - {idCodigoMandibula}</div>
                <p>Marca temporal: {marcaTemporal}</p>
                <p>Evaluador: {evaluador}</p>
                <p>Nombre: {nombre}</p>
                <p>Impresion Total Izquierda: {impresionTotalIzquierda}</p>
                <p>Menton Izquierda: {mentonIzquierda}</p>
                <p>anguloMandibularIzquierda: {anguloMandibularIzquierda}</p>
                <p>anguloMandibularDerecha: {anguloMandibularDerecha}</p>
                <p>eversionGonialDerecha: {eversionGonialDerecha}</p>
                <p>anguloMandibularDerecha: {anguloMandibularDerecha}</p>
                <p>comentarios: {comentarios}</p>
              </div>
            </div>
          )
        )}
      </main>
    </div>
  );
}

export async function getServerSideProps(ctx) {
  let dev = process.env.NODE_ENV !== 'production';
  let { DEV_URL, PROD_URL } = process.env;

  // Llamada desde API
  let response = await fetch(`${dev ? DEV_URL : PROD_URL}/api/muestras`);
  // extract the data
  let data = await response.json();

  return {
    props: {
      morfologiasMandibulas: data['message'],
    },
  };

}
