import Head from "next/head";
import Prueba from '../pages/components/Prueba'
export default function Home({ morfologiasMandibulas, dataPesomandibulas }) {

  return (
    <div>
      <Head>
        <title>DB</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className="container">

      <Prueba morfologiasMandibulas={morfologiasMandibulas} dataPesomandibulas={dataPesomandibulas}></Prueba>

      </main>
   
     
    </div>
  );
}

export async function getServerSideProps(ctx) {
  let dev = process.env.NODE_ENV !== 'production';
  let { DEV_URL, PROD_URL } = process.env;

  // Llamada desde API
  //let response = await fetch(`${dev ? DEV_URL : PROD_URL}/api/muestras`, { params } );
  // extract the data
  //let data = await response.json();

  // Llamada desde API
 
  let response = await fetch(`${dev ? DEV_URL : PROD_URL}/api/muestras`, {headers:{collection: "morfologiamandibulas",limit : 2} } )
  let data = await response.json()
  console.log("--",data,"--")
   
  let response2 = await fetch(`${dev ? DEV_URL : PROD_URL}/api/muestras`, {headers:{collection: "pesomandibulas",limit : 2} } )
  let data2 = await response2.json()
  console.log("--",data,"--")
   
  // extract the data

  return {
    props: {
      morfologiasMandibulas: data['message'],
      dataPesomandibulas: data2['message'],
    },
  };
}